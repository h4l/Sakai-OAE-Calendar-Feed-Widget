<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/calendarfeed/css/calendarfeed.css" />

<div class="calendarfeed_widget">
    <!-- WIDGET CONTENT CONTAINER -->
    <div class="s3d-widget-content">
    
        <!-- Stuff for JS templating -->
        <div id="agenda_template" style="display: none;"><!--
            <div>
            <h1 id="title" class="header1 lecture-subject">
                ${title}
                <a style="display: none;" href="${webcalFeedUrl}" title="Subscribe to these events in your external calendar">
                    <img src="/devwidgets/calendarfeed/images/external.png"></img>
                </a>
            </h1>
            <div id="calendarfeed_lectures">
              <table id="agenda">
                {if days.length === 0 && totalFeedEvents > 0}
                    <div class="info-box warning-box">
                        <h4 class="info-title">All events hidden by filter</h4>
                        <p>The widget received calendar events, but all of them 
                        were out of the date range the widget is configured to 
                        show.</p>
                    </div>
                {/if}
                {for day in days}
                    {var events = day[1]}
                    <tbody>
                    {for event in events}
                        <tr class="agenda-row">
                            
                            {if event_index == 0}
                                <td rowspan="${events.length}"
                                {if event.dayDelta < 2 && event.dayDelta >= -5}
                                    class="date relative" title="${event.absDate}">${event.relDate}</td>
                                {else}
                                    class="date absolute" title="${event.relDate}">${event.absDate}</td>                                
                                {/if}
                            {/if} 
                            
                            <td class="time">${event.time}</td>
                            <td class="description">
                                <div class="summary compact link expandable">
                                    ${event.summary}
                                </div>
                                <div class="full">
                                    {for para in event.description}
                                    <p>${para}</p>
                                    {/for}
                                    <table class="info-block">
                                    {if event.url}
                                        <tr>
                                            <td><span class="label">URL:</span></td>
                                            <td><a target="_blank" href="${event.url}" class="value link">${event.url}</a></td>
                                        </tr>
                                    {/if}
                                    {if event.location}
                                        <tr>
                                            <td><span class="label">Location:</span></td>
                                            <td><a target="_blank" href="http://maps.google.co.uk/maps?q=${encodeURIComponent(event.location)}" class="value link">${event.location}</a></td>
                                        </tr>
                                    {/if}
                                    {if event.contact}
                                        <tr>
                                            <td><span class="label">Contact:</span></td>
                                            <td><span class="value">${event.contact}</span></td>
                                        </tr>
                                    {/if}
                                    </table>
                                        
                                </div>
                            </td>
                        </tr>
                    {/for}
                    </tbody>
                {/for}
              </table>            
            </div>
            </div>
         --></div>
        
        <!-- MAIN VIEW -->
        <div id="calendarfeed_main" style="display:none;">
            <div class="loading" style="display: none;">
                <img class="center" alt="loading.." src="/devwidgets/calendarfeed/images/loading.gif"></img>
            </div>
            <div class="ajax-content" style="/*display: none;*/">
            </div>
            <div id="error_msg" style="display: none;">
            </div>
            <div id="template_error_msg"><!-- 
            <div class="info-box error-box error_container">
            	<h4 class="info-title">${title}</h4>
            	${body}
            </div>
             --></div>
        </div>
        <!-- SETTINGS VIEW -->
        <div id="calendarfeed_settings" style="display:none;">
            <!-- Your widget's settings content should go here.  Your widget's
                 JavaScript should determine whether to show it or the main
                 view defined above - both should not be visible at the same
                 time
             -->
            <p>Complete the form below to add calendar events to your page.</p>
             
            <form id="calendarfeed_settings_form">
                <div class="s3d-form-field-wrapper">
                    <label for="calendarfeed_settings_txtTitle" class="s3d-input-label s3d-input-label-above">Title:</label>
                    <input type="text" id="calendarfeed_settings_txtTitle" name="rss_settings_txtTitle" class="required s3d-input-full-width" />
                    <label for="calendarfeed_settings_txtUrl" class="s3d-input-label s3d-input-label-above">Calendar URL (iCalendar):</label>
                    <input type="text" id="calendarfeed_settings_txtUrl" name="rss_settings_txtUrl" class="required url s3d-input-full-width" />
                    
                    <label class="s3d-input-label s3d-input-label-above">Event display range:</label>
                    <div class="date-slider-wrapper">
                        <label id="calendarfeed_settings_daterangeslider_label">Events will be shown from <span class="date from">yesterday</span> to <span class="date to">tomorrow</span>.</label>
                        <!-- populated by jqueryui -->
                        <div id="daterangeslider">
                        </div>
                    </div>
                    
                    <div class="dialog_buttons" 
                         id="calendarfeed_settings_save_cancel_container" 
                         style="display: block; ">
                        <button type="button" id="calendarfeed_settings_cancel" class="s3d-bold s3d-link-button">Cancel</button>
                        <button type="button" id="calendarfeed_settings_save" class="s3d-button s3d-overlay-action-button">Save changes</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Enable only one of the following footer options -->

    <!-- WIDGET FOOTER WITH NO OPTIONS (for widgets that may be placed in *both*
         dashboards and pages)
    <div class="s3d-widget-no-options">
        <div class="s3d-widget-no-options-inner"></div>
    </div>
    -->
    <!-- WIDGET FOOTER WITH OPTIONS (for widgets that may be placed *only* in
         dashboards)
    <div class="fl-widget-options">
        <div class="widget-options-inner">
            <ul>
                <li>
                    <a href="#">OPTION_1</a>
                </li>
                <li><span class="pipe_divider">|</span></li>
                <li>
                    <a href="#">OPTION_2</a>
                </li>
            </ul>
        </div>
        <div class="s3d-widget-options-footer-left">
            <div class="s3d-widget-options-footer-right"></div>
        </div>
    </div>
    -->
</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/calendarfeed/javascript/calendarfeed.js"></script>
